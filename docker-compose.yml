version: "3.9"

services:
  passthru:
    build: ./backend
    container_name: passthru-dev
    environment:
      FACE_SERVER_URL: http://face:10002
    ports:
      - "7777:7777"
    depends_on:
      - face
      - postgres

  face:
    image: tae898/face-detection-recognition:latest
    container_name: face-server
    ports:
      - "10002:10002"

  postgres:
    image: pgvector/pgvector:pg16
    container_name: postgres-picasa
    environment:
      POSTGRES_DB: picasa
      POSTGRES_USER: picasa
      POSTGRES_PASSWORD: yourpassword
    ports:
      - "5432:5432"
    volumes:
      - pgdata:/var/lib/postgresql/data

volumes:
  pgdata:
